domain: default
local/GetStat/getCPU.js
getCPU.js
LyoKICAgICBTY3JpcHQgTmFtZTogZ2V0Q1BVLmpzCiAgICAgUHVycG9zZTogR2V0IFN0YXRpc3RpY3MgdGhhdCBjYW5ub3QgYmUgcHJvZHVjZWQgYnkgdGhlIGxvZyB0YXJnZXQgb24gRGF0YVBvd2VyLgogICAgIFJldmlzaW9uczoJVmVyc2lvbgkJRGF0ZQkJQXV0aG9yCQlEZXNjcmlwdGlvbgoJCQkJMS4wLjAgICAgIAkyMDE5CQlXaWxsIExpYW8JSW5pdGlhbCBSZXZpc2lvbgogKi8KCnZhciBzbSA9IHJlcXVpcmUoJ3NlcnZpY2UtbWV0YWRhdGEnKTsKdmFyIGhtID0gcmVxdWlyZSgnaGVhZGVyLW1ldGFkYXRhJyk7CnZhciB1cmxvcGVuID0gcmVxdWlyZSgndXJsb3BlbicpOwp2YXIgY3QgPSBobS5jdXJyZW50LmdldCgnQ29udGVudC1UeXBlJyk7CnZhciBjdHggPSBzZXNzaW9uLm5hbWUoJ2dldHN0YXQnKSB8fCBzZXNzaW9uLmNyZWF0ZUNvbnRleHQoJ2dldHN0YXQnKTsKdmFyIHZBcHBsaWFuY2UgPSBjdHguZ2V0VmFyKCdkZXZpY2VuYW1lJykucmVwbGFjZSgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4nLCcnKSB8fCAwOwp2YXIgdkRvbWFpbk5hbWUgPSBzbS5nZXRWYXIoInZhcjovL3NlcnZpY2UvZG9tYWluLW5hbWUiKTsKdmFyIHZMb2dDYXRlZ29yeSA9IHsnY2F0ZWdvcnknOidHZXRTdGF0Q2F0ZWdvcnknfTsKdmFyIHZIb3N0ID0gImh0dHBzOi8vTUdNVDo1NTU0L21nbXQvc3RhdHVzL2RlZmF1bHQvQ1BVVXNhZ2UiOwp2YXIgdlhNTENvbnRlbnRUeXBlID0gImFwcGxpY2F0aW9uL2pzb24iOwoJLy8gZGVmaW5lIHRoZSB1cmxvcGVuIG9wdGlvbnMKCXZhciBvcHRpb25zID0gewoJdGFyZ2V0IDogdkhvc3QsCgltZXRob2QgOiAnR0VUJywKCWNvbnRlbnRUeXBlIDogdlhNTENvbnRlbnRUeXBlLAoJdGltZW91dCA6IDIKfTsKCi8vIG9wZW4gY29ubmVjdGlvbiB0byB0YXJnZXQgYW5kIHNlbmQgZGF0YSBvdmVyCnVybG9wZW4ub3BlbihvcHRpb25zLCBmdW5jdGlvbiAoZXJyb3IsIHJlc3BvbnNlKSB7CglpZiAoZXJyb3IpIHsKCQkvLyBhbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgcmVxdWVzdCBzZW5kaW5nIG9yIHJlc3BvbnNlIGhlYWRlciBwYXJzaW5nCgkJY29uc29sZS5sb2coJ3VybG9wZW4gZXJyb3I6ICcgKyBlcnJvcik7CgkJc2Vzc2lvbi5vdXRwdXQud3JpdGUoInVybG9wZW4gY29ubmVjdCBlcnJvcjogIiArIGVycm9yKTsKCX0gZWxzZSB7CgkJLy8gcmVhZCByZXNwb25zZSBkYXRhCgkJLy8gZ2V0IHRoZSByZXNwb25zZSBzdGF0dXMgY29kZQoJCXZhciByZXNwb25zZVN0YXR1c0NvZGUgPSByZXNwb25zZS5zdGF0dXNDb2RlOwoJCWlmIChyZXNwb25zZVN0YXR1c0NvZGUgPT0gMjAwKSB7CgkJCXJlc3BvbnNlLnJlYWRBc0pTT04oZnVuY3Rpb24oZXJyLCByZWFkQXNKU09OUmVzcG9uc2UpIHsKCQkJCWlmIChlcnIpIHsKCQkJCQlzZXNzaW9uLnJlamVjdCgicmVhZEFzSlNPTiBlcnJvcjogIiArIEpTT04uc3RyaW5naWZ5KGVycikpOwoJCQkJfSBlbHNlIHsKCQkJCQlzZXNzaW9uLm91dHB1dC53cml0ZSgiIFN1Y2Nlc3MgIik7CgkJCQkJCgkJCQkJY29uc29sZS5vcHRpb25zKHZMb2dDYXRlZ29yeSkubG9nKCJBcHBsaWFuY2U6ICIgKyB2QXBwbGlhbmNlICsgIiwgQ1BVVXNhZ2U6ICIgKyBKU09OLnN0cmluZ2lmeShyZWFkQXNKU09OUmVzcG9uc2UuQ1BVVXNhZ2UudGVuU2Vjb25kcykpOwoJCQkJfQoJCQl9KTsKCQkJfTsKCQl9Cgl9KTsK
